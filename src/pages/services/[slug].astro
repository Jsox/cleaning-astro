---
import Layout from '../../layouts/Layout.astro';
import services from '../../services';
import HeroNotIndex from '../../components/HeroNotIndex';

const { slug } = Astro.params;

export async function getStaticPaths() {
	return services.map((service) => ({
		params: { slug: service.slug },
	}));
}

const service = services.find(
	(s) => s.slug === slug,
);

if (!service) {
	return new Response(null, {
		status: 404,
		statusText: 'Not Found',
	});
}

const { title, metaDescription, id } =
	service || {};

const posts = Object.values(
	import.meta.glob('../../docs/services/*.md', {
		eager: true,
	}),
);

const doc: any = posts.find((p: any) => {
	const fId = p?.frontmatter?.id;
	return fId == id;
});
---

<Layout
	title={title || ''}
	description={metaDescription || ''}>
	<HeroNotIndex
		title={service.title}
		description={service.description}
	/>
	<section class='relative md:py-24 py-16'>
		<div class='container md:mt-24 mt-16'>
			<div
				class='grid md:grid-cols-12 grid-cols-1 items-center gap-[30px]'>
				<div
					class='lg:col-span-7 md:col-span-6'>
					<img
						src='/assets/images/contact.svg'
						alt=''
					/>
				</div>

				<div
					class='lg:col-span-5 md:col-span-6 mt-8 md:mt-0'>
					<div class='lg:ml-5'>
						<div
							class='bg-white dark:bg-slate-900 rounded-md shadow dark:shadow-gray-800 p-6'>
							<h3
								class='mb-6 text-2xl leading-normal font-medium'
								>{
									service.title
								}</h3
							>
							<div
								class='text-slate-400'>
								<p
									>{
										service.description
									}</p
								>
								<article
									set:html={doc?.compiledContent()}
								/>
							</div>
						</div><!--end container-->
					</div><!--end section-->
				</div>
			</div></div
		>
	</section></Layout
>
